webpackJsonp([4],{14:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbGVzcy9tZXNzYWdlLmxlc3M/NzI3ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGVzcy9tZXNzYWdlLmxlc3Ncbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gNCJdLCJzb3VyY2VSb290IjoiIn0=")},19:function(module,exports){eval("window.validateRule = {\r\n\r\n    require:function(val){\r\n\r\n        return $.trim(val).length > 0;\r\n\r\n    },\r\n\r\n    nameRule:function(val){\r\n\r\n        return /^[\\u4e00-\\u9fa5]{2,6}$/.test(val);\r\n\r\n    },\r\n\r\n    textRule:function(val){\r\n\r\n        return /^.{5,}$/.test(val);\r\n\r\n    },\r\n\r\n    loginNameRule:function(val){\r\n\r\n        return /^\\d+$/.test(val);\r\n\r\n    },\r\n\r\n    loginPassRule:function(val,param){\r\n\r\n        return $.trim(val).length >= param;\r\n\r\n    },\r\n\r\n    phoneRule:function(val,param){\r\n\r\n        return $.trim(val).length >= param;\r\n\r\n    }\r\n\r\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvdmFsaWRhdGUuanM/MDkwMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBLGlDQUFpQyxJQUFJOztBQUVyQyxLQUFLOztBQUVMOztBQUVBLG1CQUFtQixHQUFHOztBQUV0QixLQUFLOztBQUVMOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTs7QUFFQTs7QUFFQSIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy52YWxpZGF0ZVJ1bGUgPSB7XHJcblxyXG4gICAgcmVxdWlyZTpmdW5jdGlvbih2YWwpe1xyXG5cclxuICAgICAgICByZXR1cm4gJC50cmltKHZhbCkubGVuZ3RoID4gMDtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG5hbWVSdWxlOmZ1bmN0aW9uKHZhbCl7XHJcblxyXG4gICAgICAgIHJldHVybiAvXltcXHU0ZTAwLVxcdTlmYTVdezIsNn0kLy50ZXN0KHZhbCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICB0ZXh0UnVsZTpmdW5jdGlvbih2YWwpe1xyXG5cclxuICAgICAgICByZXR1cm4gL14uezUsfSQvLnRlc3QodmFsKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGxvZ2luTmFtZVJ1bGU6ZnVuY3Rpb24odmFsKXtcclxuXHJcbiAgICAgICAgcmV0dXJuIC9eXFxkKyQvLnRlc3QodmFsKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGxvZ2luUGFzc1J1bGU6ZnVuY3Rpb24odmFsLHBhcmFtKXtcclxuXHJcbiAgICAgICAgcmV0dXJuICQudHJpbSh2YWwpLmxlbmd0aCA+PSBwYXJhbTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHBob25lUnVsZTpmdW5jdGlvbih2YWwscGFyYW0pe1xyXG5cclxuICAgICAgICByZXR1cm4gJC50cmltKHZhbCkubGVuZ3RoID49IHBhcmFtO1xyXG5cclxuICAgIH1cclxuXHJcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy92YWxpZGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSA0Il0sInNvdXJjZVJvb3QiOiIifQ==")},29:function(module,exports,__webpack_require__){eval("__webpack_require__(14);\r\n\r\n__webpack_require__(3);\r\n__webpack_require__(2);\r\n__webpack_require__(1);\r\n__webpack_require__(19);\r\n\r\n__webpack_require__(0);\r\n__webpack_require__(4);\r\n\r\n\r\n$(function(){\r\n\r\n    var pageResult = 0,pageCount = 4;\r\n\r\n    renderInfo();\r\n\r\n    //加载更多\r\n    $('.load-button').on('tap',function(){\r\n\r\n        renderInfo();\r\n    });\r\n    /*==================================================*/\r\n    var writingObj = $('#writing');\r\n\r\n    //留言返回按钮\r\n    com.moveDetail(writingObj);\r\n\r\n    writingObj.on('touchmove',function(e){\r\n\r\n        e.preventDefault();\r\n\r\n    });\r\n\r\n    //提示\r\n    var writObj = writingObj.find('.writ-text');\r\n\r\n    writObj.on('focus',function(){\r\n\r\n        $('.writ-prompt').hide();\r\n\r\n    });\r\n\r\n    //点击留言事件\r\n    $('#mes-input').on('tap',function(){\r\n        //留言初始化\r\n        $(\"[name='writTit']\").val('');\r\n\r\n        writObj.text('');\r\n\r\n        $('.writ-prompt').show();\r\n\r\n        $('#filePath').val('');\r\n        //头像\r\n        //$(\"[name='imgSrc']\").val('img/1.jpg');\r\n\r\n        //$('.select-img').hide();\r\n\r\n        writingObj.css('-webkit-transform','translateX(-100%)')\r\n    });\r\n\r\n    //**********************************************************\r\n    //弹出截取层对象\r\n    var clipImgObj =  $('#clip-img');\r\n\r\n    var clipHeadObj = $('.clip-head');\r\n\r\n    var clipMainObj = $('.clip-main');\r\n\r\n\r\n    //选择图片\r\n    $('#upImg').on('tap',function(){\r\n\r\n        $(\"#file\").trigger('click');\r\n\r\n    })\r\n\r\n    //选择照片更改后执行\r\n    $(\"#file\").on('change',function(){\r\n\r\n        readeFileContent();\r\n\r\n    })\r\n\r\n    function readeFileContent() {\r\n\r\n        var file = document.getElementById(\"file\").files[0];\r\n\r\n        if((file.size/1000)>500){\r\n\r\n            $.comMessage({\r\n\r\n                type:'warning',\r\n\r\n                text:'图片过大请重选',\r\n\r\n                time:3000,\r\n\r\n                animateTop:'80px'\r\n            })\r\n\r\n            return false;\r\n\r\n        }else if(!/(jpeg)|(png)|(jpg)$/.test(file.type)){\r\n\r\n            $.comMessage({\r\n\r\n                type:'warning',\r\n\r\n                text:'请选正确的图片格式(JPG/PNG)',\r\n\r\n                time:3000,\r\n\r\n                animateTop:'80px'\r\n            })\r\n\r\n            return false;\r\n        }\r\n\r\n        $('#filePath').val(file.name);\r\n\r\n        var reader = new FileReader();\r\n\r\n        reader.readAsDataURL(file);\r\n\r\n        reader.onload = function () {\r\n\r\n            var imgUrl = this.result;\r\n\r\n            var img = new Image();\r\n\r\n            img.src = imgUrl;\r\n\r\n            img.onload = function(){\r\n\r\n                var clipw = clipMainObj.css('width');\r\n\r\n                if(img.width - img.height > 0){\r\n\r\n                    clipHeadObj.prop('src',imgUrl).css('height',clipw);\r\n\r\n                }else{\r\n\r\n                    clipHeadObj.prop('src',imgUrl).css('width',clipw);\r\n\r\n                }\r\n\r\n                selx = 300 - Math.abs(clipMainObj.offset().left);\r\n\r\n                sely = 300 - Math.abs(clipMainObj.offset().top);\r\n\r\n                imgx = clipHeadObj.offset().left;\r\n\r\n                imgy = clipHeadObj.offset().top;\r\n\r\n            }\r\n        }\r\n\r\n        clipImgObj.show();\r\n    }\r\n\r\n    //********************************************************************\r\n\r\n\r\n    //图片坐标剪裁坐标\r\n    var selx = sely = imgx = imgy = '';\r\n    //拖动手指坐标\r\n    var m_sx = m_sy = '';\r\n    //两根手指间距\r\n    var initxy = '';\r\n\r\n    //拖动事件\r\n    clipMainObj.on('touchstart',function(e){\r\n\r\n        if(e.targetTouches.length>=2){\r\n\r\n            initxy = Math.abs(e.targetTouches[0].clientY - e.targetTouches[1].clientY);\r\n\r\n        }else{\r\n\r\n            initxy = '';\r\n\r\n            m_sx = e.touches[0].clientX;\r\n\r\n            m_sy = e.touches[0].clientY;\r\n\r\n        }\r\n    })\r\n\r\n    //拖动和放大事件\r\n    clipMainObj.on('touchmove',function(e){\r\n\r\n        if(e.targetTouches.length<=1){\r\n\r\n            if(initxy){return}\r\n\r\n            var tranx = window.getComputedStyle(clipHeadObj[0],null)['webkitTransform'].split(', ')[4];\r\n\r\n            var trany = window.getComputedStyle(clipHeadObj[0],null)['webkitTransform'].split(', ')[5];\r\n\r\n            trany = trany.match(/(.+)\\)$/)[1];\r\n\r\n\r\n            var sx = e.touches[0].clientX - m_sx;\r\n\r\n            var sy = e.touches[0].clientY - m_sy;\r\n\r\n            clipHeadObj.css('-webkit-transform','translate('+Math.round(Number(tranx)+sx)+'px,'+Math.round(Number(trany)+sy)+'px)');\r\n\r\n            //console.log(tranx + ' ' + trany  +\"  \")\r\n\r\n            m_sx = e.touches[0].clientX;\r\n\r\n            m_sy = e.touches[0].clientY;\r\n\r\n        }else if(e.targetTouches.length>=2){\r\n\r\n            var isMax = Math.abs(e.targetTouches[0].clientY - e.targetTouches[1].clientY);\r\n\r\n            //动画运行||缩放距离不够 则阻止\r\n            //if((Math.abs(isMax - initXY)<60)){return}\r\n            var w = isMax - initxy;\r\n\r\n            var sw = clipHeadObj.width();\r\n\r\n            var sh = clipHeadObj.height();\r\n\r\n            //根据比例调整大小\r\n            if(sw - sh >0){\r\n\r\n                clipHeadObj.css('height',(sh + w) + 'px');\r\n\r\n            }else{\r\n\r\n                clipHeadObj.css('width',(sw + w) + 'px');\r\n\r\n            }\r\n\r\n            initxy = isMax;\r\n        }\r\n\r\n        //图片坐标\r\n        imgx = clipHeadObj.offset().left;\r\n\r\n        imgy = clipHeadObj.offset().top;\r\n\r\n    })\r\n\r\n    //********************************************************************\r\n    //确定剪裁上传\r\n    $('.clip-button').on('tap',function(){\r\n\r\n        uploadFile();\r\n    })\r\n\r\n    //提交剪裁参数\r\n    function clipParam(){\r\n\r\n        return {\r\n\r\n            x:selx - imgx,\r\n\r\n            y:sely - imgy,\r\n\r\n            s:clipMainObj[0].clientWidth/clipHeadObj.width(),\r\n\r\n            w:clipHeadObj.width()\r\n        };\r\n    }\r\n\r\n    //上传图片\r\n    function uploadFile(){\r\n\r\n        var fd = new FormData();\r\n\r\n        fd.append(\"para\",JSON.stringify(clipParam()));\r\n\r\n        fd.append(\"fileToUpload\", document.getElementById('file').files[0]);\r\n\r\n\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        xhr.onreadystatechange = function(){\r\n\r\n            if (xhr.readyState==4){\r\n\r\n                if (xhr.status==200){\r\n\r\n                    if(xhr.responseText == 1){\r\n\r\n                        $.comMessage({\r\n\r\n                            type:'success',\r\n\r\n                            text:'上传完毕',\r\n\r\n                            time:2000,\r\n\r\n                            animateTop:'80px',\r\n\r\n                            back:function(){\r\n\r\n                                clipImgObj.hide();\r\n                            }\r\n\r\n                        })\r\n\r\n\r\n                    }else{\r\n\r\n                        $.comMessage({\r\n\r\n                            type:'warning',\r\n\r\n                            text:'服务器错误',\r\n\r\n                            time:3000,\r\n\r\n                            animateTop:'80px'\r\n                        })\r\n\r\n                    }\r\n\r\n                }else{\r\n\r\n                    $.comMessage({\r\n\r\n                        type:'warning',\r\n\r\n                        text:'服务器错误',\r\n\r\n                        time:3000,\r\n\r\n                        animateTop:'80px'\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        xhr.open(\"POST\",app.url('postImg.php'));\r\n\r\n        xhr.upload.addEventListener(\"progress\", uploadProgress, false);\r\n\r\n        xhr.addEventListener(\"load\", uploadComplete, false);\r\n\r\n        xhr.send(fd);\r\n\r\n        //xhr.addEventListener(\"error\", uploadFailed, false);\r\n\r\n        //xhr.addEventListener(\"abort\", uploadCanceled, false);\r\n\r\n        /* Be sure to change the url below to the url of your upload server side script */\r\n    }\r\n\r\n    //上传图片中\r\n    function uploadProgress(event){\r\n\r\n        if(event.lengthComputable) {\r\n\r\n            $('#pro-main').show();\r\n\r\n            var percentComplete = Math.round(event.loaded*100 / event.total);\r\n\r\n            $('.pro-info').text(percentComplete + '%');\r\n\r\n            $('.pro-val').val(percentComplete);\r\n\r\n            if(percentComplete>=100){\r\n\r\n                $('.pro-info').text('正在上传..');\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n    //上传图片完毕\r\n    function uploadComplete(event){\r\n\r\n        $('#pro-main').hide();\r\n\r\n    }\r\n\r\n    //*****************************************************************\r\n\r\n    //图片剪裁返回按钮\r\n    com.moveDetail(clipImgObj,function(){\r\n\r\n        clipImgObj.css('display','none');\r\n\r\n        //初始化\r\n        clipHeadObj.css({\r\n\r\n            'width':'',\r\n\r\n            'height':'',\r\n\r\n            '-webkit-transform':'translate(-50%,-50%)'\r\n\r\n        }).prop('src','');\r\n\r\n        $('#filePath').val('');\r\n    });\r\n\r\n    clipImgObj.on('touchmove',function(e){\r\n\r\n        e.preventDefault();\r\n\r\n    });\r\n\r\n\r\n    //提交\r\n    $('#sub').on('tap',function(){\r\n\r\n        if(!validateMethod(validate)){ return }\r\n\r\n        var data = {\r\n\r\n            name:$(\"input[name='writTit']\").val(),\r\n\r\n            text:$(\".writ-text\").text(),\r\n\r\n            imgPath:$(\"#filePath\").val()\r\n\r\n        };\r\n\r\n        app.ajax('post',app.url('postMesData.php'),data,function(data){\r\n\r\n            if(data){\r\n\r\n                $.comMessage({\r\n\r\n                    type:'success',\r\n\r\n                    text:'留言成功',\r\n\r\n                    time:3000,\r\n\r\n                    animateTop:'80px',\r\n\r\n                    back:function(){\r\n\r\n                        window.location.reload(true);\r\n                    }\r\n                })\r\n\r\n            }else{\r\n\r\n                $.comMessage({\r\n\r\n                    type:'warning',\r\n\r\n                    text:'留言失败,错误:' + data,\r\n\r\n                    time:3000,\r\n\r\n                    animateTop:'80px'\r\n                })\r\n\r\n            }\r\n        })\r\n    });\r\n\r\n    //取消\r\n    $('#cancel').on('tap',function(){\r\n\r\n        writingObj.css('-webkit-transform','translateX(0%)');\r\n\r\n    });\r\n\r\n    //==============================================================\r\n    var validate = {\r\n\r\n        rules:{\r\n\r\n            writTit:{require:true,nameRule:true},\r\n\r\n            writText:{require:true,textRule:true}\r\n\r\n        },\r\n\r\n        prompt:{\r\n\r\n            writTit:{require:'请填写您的称呼',nameRule:'称呼需是2-6位的文字'},\r\n\r\n            writText:{require:'没有什么要说的吗?',textRule:'留言至少5个字符哦'}\r\n\r\n        }\r\n    };\r\n\r\n    function validateMethod(validate){\r\n\r\n        var str = [];\r\n\r\n        $.each(validate.rules,function(attrName,attrObj){\r\n\r\n            var value = $(\"[name='\"+attrName+\"']\").val();\r\n\r\n            if(!value){  value = $(\"[name='\"+attrName+\"']\").text() }\r\n\r\n            $.each(attrObj,function(ruleName,ruleParam){\r\n\r\n                if(!window.validateRule[ruleName](value)){\r\n\r\n                    str.push(validate.prompt[attrName][ruleName]);\r\n                }\r\n            })\r\n        });\r\n\r\n        if(str.length>0){\r\n\r\n            $.comMessage({\r\n\r\n                type:'warning',\r\n\r\n                text:str[0],\r\n\r\n                time:3000,\r\n\r\n                animateTop:'80px'\r\n            })\r\n\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function renderInfo(){\r\n\r\n        app.ajax('get',app.url('getMesList.php'),{page:pageCount,pageStart:pageResult},function(data){\r\n\r\n            var obj = data,str = '';\r\n\r\n            //console.log(obj);\r\n\r\n            var model = $('#model-1').clone();\r\n\r\n            for(var i=0;i<obj.length;i++){\r\n\r\n                if(obj[i].statusCode == 404){continue;}\r\n\r\n                //列表id\r\n                model.find(\"[data-name='id']\").attr('data-id',obj[i].id);\r\n\r\n                //列表背景\r\n                model.find(\"[data-name='headPath']\").css('background-image',\"url(\"+app.imgUrl('user/'+obj[i].headPath)+\")\");\r\n\r\n                //标题\r\n                model.find(\"[data-name='name']\").text(obj[i].name);\r\n\r\n                //时间\r\n                model.find(\"[data-name='time']\").text(obj[i].time);\r\n\r\n                //内容\r\n                model.find(\"[data-name='text']\").text(obj[i].text);\r\n\r\n                str +=  model.html();\r\n            }\r\n\r\n            if(str == ''){\r\n\r\n                $.comMessage({\r\n\r\n                    type:'prompt',\r\n\r\n                    text:'已没有更多留言',\r\n\r\n                    time:3000,\r\n\r\n                    animateTop:'80px'\r\n                })\r\n\r\n            }else{\r\n\r\n                $('#mes-item').append(str);\r\n\r\n            }\r\n\r\n            return pageResult = pageResult + pageCount;\r\n        })\r\n    }\r\n    //选择头像\r\n    /*$('.list-img').on('tap',function(){\r\n\r\n     var _this = $(this);\r\n\r\n     $('.select-img').hide();\r\n\r\n     _this.find('.select-img').show();\r\n\r\n     $(\"input[name='imgSrc']\").val(_this.find('img').prop('src'));\r\n\r\n     })*/\r\n})//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZW50cnkvbWVzc2FnZS5qcz84Njc4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQSxTQUFTOztBQUVUOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGlCQUFpQjs7QUFFakI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxTQUFTOztBQUVUOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBOztBQUVBLHVCQUF1Qjs7QUFFdkI7O0FBRUE7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQSxnREFBZ0Q7QUFDaEQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxhQUFhOztBQUViOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7O0FBR0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx5QkFBeUI7OztBQUd6QixxQkFBcUI7O0FBRXJCOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EseUJBQXlCOztBQUV6Qjs7QUFFQSxpQkFBaUI7O0FBRWpCOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFNBQVM7O0FBRVQ7QUFDQSxLQUFLOztBQUVMOztBQUVBOztBQUVBLEtBQUs7OztBQUdMO0FBQ0E7O0FBRUEsc0NBQXNDOztBQUV0Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhOztBQUViOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDtBQUNBOztBQUVBOztBQUVBLHFCQUFxQiwyQkFBMkI7O0FBRWhELHNCQUFzQjs7QUFFdEIsU0FBUzs7QUFFVDs7QUFFQSxxQkFBcUIseUNBQXlDOztBQUU5RCxzQkFBc0I7O0FBRXRCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCOztBQUV2Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGtEQUFrRCxvQ0FBb0M7O0FBRXRGOztBQUVBOztBQUVBOztBQUVBLHdCQUF3QixhQUFhOztBQUVyQyw2Q0FBNkM7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhOztBQUViOztBQUVBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxNQUFNO0FBQ04sQ0FBQyIsImZpbGUiOiIyOS5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4uL2xlc3MvbWVzc2FnZS5sZXNzJyk7XHJcblxyXG5yZXF1aXJlKCcuLi9saWIvemVwdG8uanMnKTtcclxucmVxdWlyZSgnLi4vanMvY29tbW9uLmpzJyk7XHJcbnJlcXVpcmUoJy4uL2pzL2FqYXguanMnKTtcclxucmVxdWlyZSgnLi4vanMvdmFsaWRhdGUuanMnKTtcclxuXHJcbnJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudC9tZXNzYWdlL2NvbS1tZXNzYWdlLmpzJyk7XHJcbnJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudC9sb2FkL2NvbS1sb2FkLmpzJyk7XHJcblxyXG5cclxuJChmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBwYWdlUmVzdWx0ID0gMCxwYWdlQ291bnQgPSA0O1xyXG5cclxuICAgIHJlbmRlckluZm8oKTtcclxuXHJcbiAgICAvL+WKoOi9veabtOWkmlxyXG4gICAgJCgnLmxvYWQtYnV0dG9uJykub24oJ3RhcCcsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgcmVuZGVySW5mbygpO1xyXG4gICAgfSk7XHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuICAgIHZhciB3cml0aW5nT2JqID0gJCgnI3dyaXRpbmcnKTtcclxuXHJcbiAgICAvL+eVmeiogOi/lOWbnuaMiemSrlxyXG4gICAgY29tLm1vdmVEZXRhaWwod3JpdGluZ09iaik7XHJcblxyXG4gICAgd3JpdGluZ09iai5vbigndG91Y2htb3ZlJyxmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8v5o+Q56S6XHJcbiAgICB2YXIgd3JpdE9iaiA9IHdyaXRpbmdPYmouZmluZCgnLndyaXQtdGV4dCcpO1xyXG5cclxuICAgIHdyaXRPYmoub24oJ2ZvY3VzJyxmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkKCcud3JpdC1wcm9tcHQnKS5oaWRlKCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/ngrnlh7vnlZnoqIDkuovku7ZcclxuICAgICQoJyNtZXMtaW5wdXQnKS5vbigndGFwJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIC8v55WZ6KiA5Yid5aeL5YyWXHJcbiAgICAgICAgJChcIltuYW1lPSd3cml0VGl0J11cIikudmFsKCcnKTtcclxuXHJcbiAgICAgICAgd3JpdE9iai50ZXh0KCcnKTtcclxuXHJcbiAgICAgICAgJCgnLndyaXQtcHJvbXB0Jykuc2hvdygpO1xyXG5cclxuICAgICAgICAkKCcjZmlsZVBhdGgnKS52YWwoJycpO1xyXG4gICAgICAgIC8v5aS05YOPXHJcbiAgICAgICAgLy8kKFwiW25hbWU9J2ltZ1NyYyddXCIpLnZhbCgnaW1nLzEuanBnJyk7XHJcblxyXG4gICAgICAgIC8vJCgnLnNlbGVjdC1pbWcnKS5oaWRlKCk7XHJcblxyXG4gICAgICAgIHdyaXRpbmdPYmouY3NzKCctd2Via2l0LXRyYW5zZm9ybScsJ3RyYW5zbGF0ZVgoLTEwMCUpJylcclxuICAgIH0pO1xyXG5cclxuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gICAgLy/lvLnlh7rmiKrlj5blsYLlr7nosaFcclxuICAgIHZhciBjbGlwSW1nT2JqID0gICQoJyNjbGlwLWltZycpO1xyXG5cclxuICAgIHZhciBjbGlwSGVhZE9iaiA9ICQoJy5jbGlwLWhlYWQnKTtcclxuXHJcbiAgICB2YXIgY2xpcE1haW5PYmogPSAkKCcuY2xpcC1tYWluJyk7XHJcblxyXG5cclxuICAgIC8v6YCJ5oup5Zu+54mHXHJcbiAgICAkKCcjdXBJbWcnKS5vbigndGFwJyxmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkKFwiI2ZpbGVcIikudHJpZ2dlcignY2xpY2snKTtcclxuXHJcbiAgICB9KVxyXG5cclxuICAgIC8v6YCJ5oup54Wn54mH5pu05pS55ZCO5omn6KGMXHJcbiAgICAkKFwiI2ZpbGVcIikub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgcmVhZGVGaWxlQ29udGVudCgpO1xyXG5cclxuICAgIH0pXHJcblxyXG4gICAgZnVuY3Rpb24gcmVhZGVGaWxlQ29udGVudCgpIHtcclxuXHJcbiAgICAgICAgdmFyIGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbGVcIikuZmlsZXNbMF07XHJcblxyXG4gICAgICAgIGlmKChmaWxlLnNpemUvMTAwMCk+NTAwKXtcclxuXHJcbiAgICAgICAgICAgICQuY29tTWVzc2FnZSh7XHJcblxyXG4gICAgICAgICAgICAgICAgdHlwZTond2FybmluZycsXHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dDon5Zu+54mH6L+H5aSn6K+36YeN6YCJJyxcclxuXHJcbiAgICAgICAgICAgICAgICB0aW1lOjMwMDAsXHJcblxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZVRvcDonODBweCdcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgfWVsc2UgaWYoIS8oanBlZyl8KHBuZyl8KGpwZykkLy50ZXN0KGZpbGUudHlwZSkpe1xyXG5cclxuICAgICAgICAgICAgJC5jb21NZXNzYWdlKHtcclxuXHJcbiAgICAgICAgICAgICAgICB0eXBlOid3YXJuaW5nJyxcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0Oifor7fpgInmraPnoa7nmoTlm77niYfmoLzlvI8oSlBHL1BORyknLFxyXG5cclxuICAgICAgICAgICAgICAgIHRpbWU6MzAwMCxcclxuXHJcbiAgICAgICAgICAgICAgICBhbmltYXRlVG9wOic4MHB4J1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnI2ZpbGVQYXRoJykudmFsKGZpbGUubmFtZSk7XHJcblxyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWdVcmwgPSB0aGlzLnJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBpbWdVcmw7XHJcblxyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpcHcgPSBjbGlwTWFpbk9iai5jc3MoJ3dpZHRoJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaW1nLndpZHRoIC0gaW1nLmhlaWdodCA+IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGlwSGVhZE9iai5wcm9wKCdzcmMnLGltZ1VybCkuY3NzKCdoZWlnaHQnLGNsaXB3KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpcEhlYWRPYmoucHJvcCgnc3JjJyxpbWdVcmwpLmNzcygnd2lkdGgnLGNsaXB3KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2VseCA9IDMwMCAtIE1hdGguYWJzKGNsaXBNYWluT2JqLm9mZnNldCgpLmxlZnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbHkgPSAzMDAgLSBNYXRoLmFicyhjbGlwTWFpbk9iai5vZmZzZXQoKS50b3ApO1xyXG5cclxuICAgICAgICAgICAgICAgIGltZ3ggPSBjbGlwSGVhZE9iai5vZmZzZXQoKS5sZWZ0O1xyXG5cclxuICAgICAgICAgICAgICAgIGltZ3kgPSBjbGlwSGVhZE9iai5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGlwSW1nT2JqLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5cclxuICAgIC8v5Zu+54mH5Z2Q5qCH5Ymq6KOB5Z2Q5qCHXHJcbiAgICB2YXIgc2VseCA9IHNlbHkgPSBpbWd4ID0gaW1neSA9ICcnO1xyXG4gICAgLy/mi5bliqjmiYvmjIflnZDmoIdcclxuICAgIHZhciBtX3N4ID0gbV9zeSA9ICcnO1xyXG4gICAgLy/kuKTmoLnmiYvmjIfpl7Tot51cclxuICAgIHZhciBpbml0eHkgPSAnJztcclxuXHJcbiAgICAvL+aLluWKqOS6i+S7tlxyXG4gICAgY2xpcE1haW5PYmoub24oJ3RvdWNoc3RhcnQnLGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgICBpZihlLnRhcmdldFRvdWNoZXMubGVuZ3RoPj0yKXtcclxuXHJcbiAgICAgICAgICAgIGluaXR4eSA9IE1hdGguYWJzKGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZIC0gZS50YXJnZXRUb3VjaGVzWzFdLmNsaWVudFkpO1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGluaXR4eSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgbV9zeCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xyXG5cclxuICAgICAgICAgICAgbV9zeSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8v5ouW5Yqo5ZKM5pS+5aSn5LqL5Lu2XHJcbiAgICBjbGlwTWFpbk9iai5vbigndG91Y2htb3ZlJyxmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgaWYoZS50YXJnZXRUb3VjaGVzLmxlbmd0aDw9MSl7XHJcblxyXG4gICAgICAgICAgICBpZihpbml0eHkpe3JldHVybn1cclxuXHJcbiAgICAgICAgICAgIHZhciB0cmFueCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNsaXBIZWFkT2JqWzBdLG51bGwpWyd3ZWJraXRUcmFuc2Zvcm0nXS5zcGxpdCgnLCAnKVs0XTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0cmFueSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNsaXBIZWFkT2JqWzBdLG51bGwpWyd3ZWJraXRUcmFuc2Zvcm0nXS5zcGxpdCgnLCAnKVs1XTtcclxuXHJcbiAgICAgICAgICAgIHRyYW55ID0gdHJhbnkubWF0Y2goLyguKylcXCkkLylbMV07XHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHN4ID0gZS50b3VjaGVzWzBdLmNsaWVudFggLSBtX3N4O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN5ID0gZS50b3VjaGVzWzBdLmNsaWVudFkgLSBtX3N5O1xyXG5cclxuICAgICAgICAgICAgY2xpcEhlYWRPYmouY3NzKCctd2Via2l0LXRyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnK01hdGgucm91bmQoTnVtYmVyKHRyYW54KStzeCkrJ3B4LCcrTWF0aC5yb3VuZChOdW1iZXIodHJhbnkpK3N5KSsncHgpJyk7XHJcblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRyYW54ICsgJyAnICsgdHJhbnkgICtcIiAgXCIpXHJcblxyXG4gICAgICAgICAgICBtX3N4ID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcblxyXG4gICAgICAgICAgICBtX3N5ID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XHJcblxyXG4gICAgICAgIH1lbHNlIGlmKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGg+PTIpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGlzTWF4ID0gTWF0aC5hYnMoZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkgLSBlLnRhcmdldFRvdWNoZXNbMV0uY2xpZW50WSk7XHJcblxyXG4gICAgICAgICAgICAvL+WKqOeUu+i/kOihjHx857yp5pS+6Led56a75LiN5aSfIOWImemYu+atolxyXG4gICAgICAgICAgICAvL2lmKChNYXRoLmFicyhpc01heCAtIGluaXRYWSk8NjApKXtyZXR1cm59XHJcbiAgICAgICAgICAgIHZhciB3ID0gaXNNYXggLSBpbml0eHk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3cgPSBjbGlwSGVhZE9iai53aWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNoID0gY2xpcEhlYWRPYmouaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAvL+agueaNruavlOS+i+iwg+aVtOWkp+Wwj1xyXG4gICAgICAgICAgICBpZihzdyAtIHNoID4wKXtcclxuXHJcbiAgICAgICAgICAgICAgICBjbGlwSGVhZE9iai5jc3MoJ2hlaWdodCcsKHNoICsgdykgKyAncHgnKTtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIGNsaXBIZWFkT2JqLmNzcygnd2lkdGgnLChzdyArIHcpICsgJ3B4Jyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbml0eHkgPSBpc01heDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5Zu+54mH5Z2Q5qCHXHJcbiAgICAgICAgaW1neCA9IGNsaXBIZWFkT2JqLm9mZnNldCgpLmxlZnQ7XHJcblxyXG4gICAgICAgIGltZ3kgPSBjbGlwSGVhZE9iai5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgfSlcclxuXHJcbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAvL+ehruWumuWJquijgeS4iuS8oFxyXG4gICAgJCgnLmNsaXAtYnV0dG9uJykub24oJ3RhcCcsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgdXBsb2FkRmlsZSgpO1xyXG4gICAgfSlcclxuXHJcbiAgICAvL+aPkOS6pOWJquijgeWPguaVsFxyXG4gICAgZnVuY3Rpb24gY2xpcFBhcmFtKCl7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgICAgICB4OnNlbHggLSBpbWd4LFxyXG5cclxuICAgICAgICAgICAgeTpzZWx5IC0gaW1neSxcclxuXHJcbiAgICAgICAgICAgIHM6Y2xpcE1haW5PYmpbMF0uY2xpZW50V2lkdGgvY2xpcEhlYWRPYmoud2lkdGgoKSxcclxuXHJcbiAgICAgICAgICAgIHc6Y2xpcEhlYWRPYmoud2lkdGgoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy/kuIrkvKDlm77niYdcclxuICAgIGZ1bmN0aW9uIHVwbG9hZEZpbGUoKXtcclxuXHJcbiAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XHJcblxyXG4gICAgICAgIGZkLmFwcGVuZChcInBhcmFcIixKU09OLnN0cmluZ2lmeShjbGlwUGFyYW0oKSkpO1xyXG5cclxuICAgICAgICBmZC5hcHBlbmQoXCJmaWxlVG9VcGxvYWRcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUnKS5maWxlc1swXSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlPT00KXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cz09MjAwKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoeGhyLnJlc3BvbnNlVGV4dCA9PSAxKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuY29tTWVzc2FnZSh7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonc3VjY2VzcycsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDon5LiK5Lyg5a6M5q+VJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOjIwMDAsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZVRvcDonODBweCcsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFjazpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwSW1nT2JqLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuY29tTWVzc2FnZSh7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTond2FybmluZycsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDon5pyN5Yqh5Zmo6ZSZ6K+vJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOjMwMDAsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZVRvcDonODBweCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkLmNvbU1lc3NhZ2Uoe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTond2FybmluZycsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OifmnI3liqHlmajplJnor68nLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTozMDAwLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZVRvcDonODBweCdcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB4aHIub3BlbihcIlBPU1RcIixhcHAudXJsKCdwb3N0SW1nLnBocCcpKTtcclxuXHJcbiAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgdXBsb2FkUHJvZ3Jlc3MsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHVwbG9hZENvbXBsZXRlLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIHhoci5zZW5kKGZkKTtcclxuXHJcbiAgICAgICAgLy94aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIHVwbG9hZEZhaWxlZCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvL3hoci5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgdXBsb2FkQ2FuY2VsZWQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLyogQmUgc3VyZSB0byBjaGFuZ2UgdGhlIHVybCBiZWxvdyB0byB0aGUgdXJsIG9mIHlvdXIgdXBsb2FkIHNlcnZlciBzaWRlIHNjcmlwdCAqL1xyXG4gICAgfVxyXG5cclxuICAgIC8v5LiK5Lyg5Zu+54mH5LitXHJcbiAgICBmdW5jdGlvbiB1cGxvYWRQcm9ncmVzcyhldmVudCl7XHJcblxyXG4gICAgICAgIGlmKGV2ZW50Lmxlbmd0aENvbXB1dGFibGUpIHtcclxuXHJcbiAgICAgICAgICAgICQoJyNwcm8tbWFpbicpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwZXJjZW50Q29tcGxldGUgPSBNYXRoLnJvdW5kKGV2ZW50LmxvYWRlZCoxMDAgLyBldmVudC50b3RhbCk7XHJcblxyXG4gICAgICAgICAgICAkKCcucHJvLWluZm8nKS50ZXh0KHBlcmNlbnRDb21wbGV0ZSArICclJyk7XHJcblxyXG4gICAgICAgICAgICAkKCcucHJvLXZhbCcpLnZhbChwZXJjZW50Q29tcGxldGUpO1xyXG5cclxuICAgICAgICAgICAgaWYocGVyY2VudENvbXBsZXRlPj0xMDApe1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5wcm8taW5mbycpLnRleHQoJ+ato+WcqOS4iuS8oC4uJyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8v5LiK5Lyg5Zu+54mH5a6M5q+VXHJcbiAgICBmdW5jdGlvbiB1cGxvYWRDb21wbGV0ZShldmVudCl7XHJcblxyXG4gICAgICAgICQoJyNwcm8tbWFpbicpLmhpZGUoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuICAgIC8v5Zu+54mH5Ymq6KOB6L+U5Zue5oyJ6ZKuXHJcbiAgICBjb20ubW92ZURldGFpbChjbGlwSW1nT2JqLGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGNsaXBJbWdPYmouY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG5cclxuICAgICAgICAvL+WIneWni+WMllxyXG4gICAgICAgIGNsaXBIZWFkT2JqLmNzcyh7XHJcblxyXG4gICAgICAgICAgICAnd2lkdGgnOicnLFxyXG5cclxuICAgICAgICAgICAgJ2hlaWdodCc6JycsXHJcblxyXG4gICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOid0cmFuc2xhdGUoLTUwJSwtNTAlKSdcclxuXHJcbiAgICAgICAgfSkucHJvcCgnc3JjJywnJyk7XHJcblxyXG4gICAgICAgICQoJyNmaWxlUGF0aCcpLnZhbCgnJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbGlwSW1nT2JqLm9uKCd0b3VjaG1vdmUnLGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v5o+Q5LqkXHJcbiAgICAkKCcjc3ViJykub24oJ3RhcCcsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYoIXZhbGlkYXRlTWV0aG9kKHZhbGlkYXRlKSl7IHJldHVybiB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG5cclxuICAgICAgICAgICAgbmFtZTokKFwiaW5wdXRbbmFtZT0nd3JpdFRpdCddXCIpLnZhbCgpLFxyXG5cclxuICAgICAgICAgICAgdGV4dDokKFwiLndyaXQtdGV4dFwiKS50ZXh0KCksXHJcblxyXG4gICAgICAgICAgICBpbWdQYXRoOiQoXCIjZmlsZVBhdGhcIikudmFsKClcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYXBwLmFqYXgoJ3Bvc3QnLGFwcC51cmwoJ3Bvc3RNZXNEYXRhLnBocCcpLGRhdGEsZnVuY3Rpb24oZGF0YSl7XHJcblxyXG4gICAgICAgICAgICBpZihkYXRhKXtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmNvbU1lc3NhZ2Uoe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0eXBlOidzdWNjZXNzJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDon55WZ6KiA5oiQ5YqfJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTozMDAwLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRlVG9wOic4MHB4JyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmFjazpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfWVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5jb21NZXNzYWdlKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTond2FybmluZycsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6J+eVmeiogOWksei0pSzplJnor686JyArIGRhdGEsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6MzAwMCxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZVRvcDonODBweCdcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIC8v5Y+W5raIXHJcbiAgICAkKCcjY2FuY2VsJykub24oJ3RhcCcsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgd3JpdGluZ09iai5jc3MoJy13ZWJraXQtdHJhbnNmb3JtJywndHJhbnNsYXRlWCgwJSknKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICB2YXIgdmFsaWRhdGUgPSB7XHJcblxyXG4gICAgICAgIHJ1bGVzOntcclxuXHJcbiAgICAgICAgICAgIHdyaXRUaXQ6e3JlcXVpcmU6dHJ1ZSxuYW1lUnVsZTp0cnVlfSxcclxuXHJcbiAgICAgICAgICAgIHdyaXRUZXh0OntyZXF1aXJlOnRydWUsdGV4dFJ1bGU6dHJ1ZX1cclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcHJvbXB0OntcclxuXHJcbiAgICAgICAgICAgIHdyaXRUaXQ6e3JlcXVpcmU6J+ivt+Whq+WGmeaCqOeahOensOWRvCcsbmFtZVJ1bGU6J+ensOWRvOmcgOaYrzItNuS9jeeahOaWh+Wtlyd9LFxyXG5cclxuICAgICAgICAgICAgd3JpdFRleHQ6e3JlcXVpcmU6J+ayoeacieS7gOS5iOimgeivtOeahOWQlz8nLHRleHRSdWxlOifnlZnoqIDoh7PlsJE15Liq5a2X56ym5ZOmJ31cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZU1ldGhvZCh2YWxpZGF0ZSl7XHJcblxyXG4gICAgICAgIHZhciBzdHIgPSBbXTtcclxuXHJcbiAgICAgICAgJC5lYWNoKHZhbGlkYXRlLnJ1bGVzLGZ1bmN0aW9uKGF0dHJOYW1lLGF0dHJPYmope1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gJChcIltuYW1lPSdcIithdHRyTmFtZStcIiddXCIpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoIXZhbHVlKXsgIHZhbHVlID0gJChcIltuYW1lPSdcIithdHRyTmFtZStcIiddXCIpLnRleHQoKSB9XHJcblxyXG4gICAgICAgICAgICAkLmVhY2goYXR0ck9iaixmdW5jdGlvbihydWxlTmFtZSxydWxlUGFyYW0pe1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCF3aW5kb3cudmFsaWRhdGVSdWxlW3J1bGVOYW1lXSh2YWx1ZSkpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdHIucHVzaCh2YWxpZGF0ZS5wcm9tcHRbYXR0ck5hbWVdW3J1bGVOYW1lXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKHN0ci5sZW5ndGg+MCl7XHJcblxyXG4gICAgICAgICAgICAkLmNvbU1lc3NhZ2Uoe1xyXG5cclxuICAgICAgICAgICAgICAgIHR5cGU6J3dhcm5pbmcnLFxyXG5cclxuICAgICAgICAgICAgICAgIHRleHQ6c3RyWzBdLFxyXG5cclxuICAgICAgICAgICAgICAgIHRpbWU6MzAwMCxcclxuXHJcbiAgICAgICAgICAgICAgICBhbmltYXRlVG9wOic4MHB4J1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW5kZXJJbmZvKCl7XHJcblxyXG4gICAgICAgIGFwcC5hamF4KCdnZXQnLGFwcC51cmwoJ2dldE1lc0xpc3QucGhwJykse3BhZ2U6cGFnZUNvdW50LHBhZ2VTdGFydDpwYWdlUmVzdWx0fSxmdW5jdGlvbihkYXRhKXtcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmogPSBkYXRhLHN0ciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhvYmopO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1vZGVsID0gJCgnI21vZGVsLTEnKS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKyl7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYob2JqW2ldLnN0YXR1c0NvZGUgPT0gNDA0KXtjb250aW51ZTt9XHJcblxyXG4gICAgICAgICAgICAgICAgLy/liJfooahpZFxyXG4gICAgICAgICAgICAgICAgbW9kZWwuZmluZChcIltkYXRhLW5hbWU9J2lkJ11cIikuYXR0cignZGF0YS1pZCcsb2JqW2ldLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL+WIl+ihqOiDjOaZr1xyXG4gICAgICAgICAgICAgICAgbW9kZWwuZmluZChcIltkYXRhLW5hbWU9J2hlYWRQYXRoJ11cIikuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJyxcInVybChcIithcHAuaW1nVXJsKCd1c2VyLycrb2JqW2ldLmhlYWRQYXRoKStcIilcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy/moIfpophcclxuICAgICAgICAgICAgICAgIG1vZGVsLmZpbmQoXCJbZGF0YS1uYW1lPSduYW1lJ11cIikudGV4dChvYmpbaV0ubmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy/ml7bpl7RcclxuICAgICAgICAgICAgICAgIG1vZGVsLmZpbmQoXCJbZGF0YS1uYW1lPSd0aW1lJ11cIikudGV4dChvYmpbaV0udGltZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy/lhoXlrrlcclxuICAgICAgICAgICAgICAgIG1vZGVsLmZpbmQoXCJbZGF0YS1uYW1lPSd0ZXh0J11cIikudGV4dChvYmpbaV0udGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RyICs9ICBtb2RlbC5odG1sKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKHN0ciA9PSAnJyl7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5jb21NZXNzYWdlKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZToncHJvbXB0JyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDon5bey5rKh5pyJ5pu05aSa55WZ6KiAJyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTozMDAwLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRlVG9wOic4MHB4J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICQoJyNtZXMtaXRlbScpLmFwcGVuZChzdHIpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhZ2VSZXN1bHQgPSBwYWdlUmVzdWx0ICsgcGFnZUNvdW50O1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvL+mAieaLqeWktOWDj1xyXG4gICAgLyokKCcubGlzdC1pbWcnKS5vbigndGFwJyxmdW5jdGlvbigpe1xyXG5cclxuICAgICB2YXIgX3RoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAkKCcuc2VsZWN0LWltZycpLmhpZGUoKTtcclxuXHJcbiAgICAgX3RoaXMuZmluZCgnLnNlbGVjdC1pbWcnKS5zaG93KCk7XHJcblxyXG4gICAgICQoXCJpbnB1dFtuYW1lPSdpbWdTcmMnXVwiKS52YWwoX3RoaXMuZmluZCgnaW1nJykucHJvcCgnc3JjJykpO1xyXG5cclxuICAgICB9KSovXHJcbn0pXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZW50cnkvbWVzc2FnZS5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSA0Il0sInNvdXJjZVJvb3QiOiIifQ==")}},[29]);